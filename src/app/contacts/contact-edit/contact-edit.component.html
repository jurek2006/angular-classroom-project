<mat-card class="card">
  <mat-card-title>
    <div *ngIf="editMode; then editContactView; else newContactView">
      <!-- only used to render conditionaly ng-template -->
    </div>

    <ng-template #editContactView>
      <h2>
        Edit contact: {{ contactToEdit?.firstName }}
        {{ contactToEdit?.lastName }}
      </h2>
      <button
        type="button"
        (click)="onDeleteContact()"
        mat-stroked-button
        class="btn-danger"
      >
        <i class="material-icons">
          delete
        </i>
        Delete contact
      </button>
    </ng-template>

    <ng-template #newContactView>
      <h2>Add new contact</h2>
    </ng-template>
  </mat-card-title>

  <form *ngIf="!deleteMode" [formGroup]="contactForm" (ngSubmit)="onSubmit()">
    <mat-card-content>
      <mat-form-field>
        <mat-label>First name:</mat-label>
        <input
          type="text"
          name="firstName"
          id="firstName"
          formControlName="firstName"
          matInput
          placeholder="First name"
        />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Last name:</mat-label>
        <input
          type="text"
          name="lastName"
          id="lastName"
          formControlName="lastName"
          matInput
          placeholder="Last name"
        />
      </mat-form-field>
    </mat-card-content>
    <mat-card-actions>
      <button type="button" (click)="onCancel()" mat-stroked-button>
        <i class="material-icons"> cancel </i> Cancel
      </button>
      <button
        [disabled]="!contactForm.valid"
        mat-stroked-button
        class="btn-success"
      >
        <i class="material-icons">
          check_circle
        </i>
        Save contact
      </button>
    </mat-card-actions>
  </form>

  <!-- component for deleting contact on purpose nested in edit - component -->
  <!-- the reason is not to create separate route which could be accessed by mistake -->
  <app-contact-delete
    *ngIf="deleteMode"
    [contact]="contactToEdit"
    (cancelDelete)="deleteMode = false"
  ></app-contact-delete>
</mat-card>
